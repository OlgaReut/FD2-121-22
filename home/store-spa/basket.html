<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basket</title>
</head>
<body>

    <script>
        window.addEventListener('storage', () => {
            console.log("localstorage changed");
        })     

        const auto = JSON.parse(localStorage.getItem('cars'));
        localStorage.setItem('cars', JSON.stringify('cars'));


        if(arrBasket.length==0) {
      price=0;
      document.querySelector(".allPrice").textContent=`Итого: ${price} $`;
      
        }

    let divBasketDelete = document.querySelectorAll('.divBasket'); // все предыдущие карточки, если они есть, для того чтоб удалить
    for( let r=0; r<divBasketDelete.length; r++) { //Создала цикл,чтоб карточки не накапливались
        divBasketDelete[r].remove();              
    }
     
    for (let m=0;m<arrBasket.length;m++) {
      sum++;
      price+=arrBasket[m].price*arrBasket[m].rep; //Итоговая стоимость


        function minusCar(e){
            console.log(e.target.dataset.id)

            if(arrBasket[m].rep-1==0) {
                function fff (v) {
                    return v.id!=e.target.dataset.id;
                }
                arrBasket= arrBasket.filter( fff);

            rendomBasket();
            console.log(arrBasket)
            return;
            }
            
            
            arrBasket[m].rep--;
            rendomBasket()
        }

        let divBasket=document.createElement("div");
        divBasket.className="divBasket";
        choice.appendChild(divBasket);

        let brandTitleBasket=document.createElement("span");
        divBasket.appendChild(brandTitleBasket);
        brandTitleBasket.textContent=sum+") "+arrBasket[m].brandTitle;

        let modelTitleBasket=document.createElement("span");
        divBasket.appendChild(modelTitleBasket);
        modelTitleBasket.textContent=" "+arrBasket[m].modelTitle;

        let priceBasket=document.createElement("span");
        divBasket.appendChild(priceBasket);
        priceBasket.textContent="-"+(arrBasket[m].price*arrBasket[m].rep)+"$";

        let repeat=document.createElement("span");
        repeat.className="repeat";
        divBasket.appendChild(repeat);
        repeat.textContent=`(${arrBasket[m].rep} шт.)`
        

        let allPrice=document.querySelector(".allPrice");
        allPrice.textContent=`Итого: ${price} $`;

    }
    </script>

    // 1. положить весь массив в локалсторэдж
    // 2. при добавлении в корзину элементов, по id положить в локалсторэдж
    // 3. на этой странице достать все элементы и отрисовать
    
</body>
</html>